---
id: o-91d7
status: closed
deps: []
links: []
created: 2026-01-05T10:46:51Z
type: task
priority: 2
assignee: Stephan van Stekelenburg
external-ref: gh-2
---
# Implement secure token storage

## Overview
Implement secure storage for OAuth tokens (access token, refresh token, expiry) following best practices for CLI applications.

## Storage Strategy

### Location
Store tokens in a platform-appropriate location:
- **Linux**: ~/.config/opencal/auth.json or $XDG_CONFIG_HOME/opencal/auth.json
- **macOS**: ~/Library/Application Support/opencal/auth.json
- **Windows**: %APPDATA%\opencal\auth.json

### Security Considerations
- Set file permissions to 0600 (read/write for owner only)
- Never commit tokens to version control
- Add auth.json to .gitignore
- Consider using OS keychain/credential managers in future (v2)

## Tasks
- [ ] Implement token file path resolution
- [ ] Create token storage functions (write/read/delete)
- [ ] Set appropriate file permissions
- [ ] Add auth.json to .gitignore
- [ ] Implement token validation (check expiry)
- [ ] Implement token refresh logic

